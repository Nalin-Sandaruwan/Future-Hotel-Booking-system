{
	"info": {
		"_postman_id": "hotel-booking-api-collection",
		"name": "üè® Future Hotel Booking API",
		"description": "Complete API collection for Future Hotel Booking System\n\n## Features:\n- User Authentication & Authorization\n- Room Management (CRUD)\n- Booking System\n- Payment Integration (Stripe)\n- Role-based Access Control\n\n## Base URL: \n`http://localhost:3000/api/v1`\n\n## Authentication:\nMost endpoints require JWT token in Authorization header:\n`Authorization: Bearer <your_jwt_token>`\n\n## Author: Nalin Sithara\n## Repository: https://github.com/Nalin-Sandaruwan/Future-Hotel-Booking-system",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "hotel-booking-api"
	},
	"item": [
		{
			"name": "üîê Authentication",
			"item": [
				{
					"name": "User Registration",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    if (response.token) {",
									"        pm.environment.set('jwt_token', response.token);",
									"        pm.environment.set('user_id', response.data.user._id);",
									"        console.log('Token saved to environment variables');",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\",\n  \"confirmPassword\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/sign-up",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"sign-up"
							]
						},
						"description": "Register a new user account. Requires name, email, password, and confirmPassword."
					},
					"response": []
				},
				{
					"name": "User Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.token) {",
									"        pm.environment.set('jwt_token', response.token);",
									"        pm.environment.set('user_id', response.data.user._id);",
									"        pm.environment.set('user_role', response.data.user.role);",
									"        console.log('Login successful! Token saved to environment variables');",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"login"
							]
						},
						"description": "Login with email and password. Returns JWT token for authentication."
					},
					"response": []
				},
				{
					"name": "Forgot Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john@example.com\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/forget-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"forget-password"
							]
						},
						"description": "Request password reset OTP. OTP will be sent to the user's email (currently returns OTP in response for testing)."
					},
					"response": []
				},
				{
					"name": "Reset Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john@example.com\",\n  \"otp\": \"123456\",\n  \"newPassword\": \"newpassword123\",\n  \"confirmPassword\": \"newpassword123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/reset-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"reset-password"
							]
						},
						"description": "Reset password using OTP received via email."
					},
					"response": []
				}
			],
			"description": "Authentication endpoints for user registration, login, and password management."
		},
		{
			"name": "üè† Room Management",
			"item": [
				{
					"name": "Get All Rooms",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/rooms",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"rooms"
							]
						},
						"description": "Get all available rooms. No authentication required."
					},
					"response": []
				},
				{
					"name": "Get Room by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/rooms/{{room_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"rooms",
								"{{room_id}}"
							]
						},
						"description": "Get a specific room by ID. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Create Room (Admin Only)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    if (response.Data && response.Data._id) {",
									"        pm.environment.set('room_id', response.Data._id);",
									"        console.log('Room created! ID saved to environment variables');",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Premium Suite\",\n  \"discription\": \"Exclusive suite with city view and modern amenities\",\n  \"gestCapacity\": 2,\n  \"price\": 199.99,\n  \"location\": \"City Center\",\n  \"amenities\": [\"WiFi\", \"Room Service\", \"Mini Bar\", \"Air Conditioning\", \"City View\"],\n  \"images\": [\"premium1.jpg\", \"premium2.jpg\", \"premium3.jpg\"]\n}"
						},
						"url": {
							"raw": "{{base_url}}/rooms",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"rooms"
							]
						},
						"description": "Create a new room. Requires admin authentication."
					},
					"response": []
				},
				{
					"name": "Update Room (Admin Only)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Premium Suite\",\n  \"price\": 249.99,\n  \"amenities\": [\"WiFi\", \"Room Service\", \"Mini Bar\", \"Air Conditioning\", \"City View\", \"Balcony\"]\n}"
						},
						"url": {
							"raw": "{{base_url}}/rooms/{{room_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"rooms",
								"{{room_id}}"
							]
						},
						"description": "Update an existing room. Requires admin authentication."
					},
					"response": []
				},
				{
					"name": "Delete Room (Admin Only)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/rooms/{{room_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"rooms",
								"{{room_id}}"
							]
						},
						"description": "Delete a room. Requires admin authentication."
					},
					"response": []
				}
			],
			"description": "Room management endpoints for CRUD operations on hotel rooms."
		},
		{
			"name": "üìÖ Booking Management",
			"item": [
				{
					"name": "Create Booking",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.booking && response.data.booking._id) {",
									"        pm.environment.set('booking_id', response.data.booking._id);",
									"        console.log('Booking created! ID saved to environment variables');",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"roomId\": \"{{room_id}}\",\n  \"startDate\": \"2024-02-15T00:00:00.000Z\",\n  \"endDate\": \"2024-02-18T00:00:00.000Z\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/bookings",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"bookings"
							]
						},
						"description": "Create a new booking. Requires authentication. Automatically checks for booking conflicts."
					},
					"response": []
				},
				{
					"name": "Get All Bookings",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/bookings",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"bookings"
							],
							"query": [
								{
									"key": "sort",
									"value": "-startDate",
									"description": "Sort by start date (descending)",
									"disabled": true
								},
								{
									"key": "page",
									"value": "1",
									"description": "Page number for pagination",
									"disabled": true
								},
								{
									"key": "limit",
									"value": "10",
									"description": "Number of results per page",
									"disabled": true
								}
							]
						},
						"description": "Get all bookings with user and room details populated. Supports filtering, sorting, and pagination."
					},
					"response": []
				},
				{
					"name": "Get Booking by ID (Admin Only)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/bookings/{{booking_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"bookings",
								"{{booking_id}}"
							]
						},
						"description": "Get a specific booking by ID with user and room details. Requires admin authentication."
					},
					"response": []
				},
				{
					"name": "Update Booking (Admin Only)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"confirmed\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/bookings/{{booking_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"bookings",
								"{{booking_id}}"
							]
						},
						"description": "Update booking status or other details. Requires admin authentication."
					},
					"response": []
				},
				{
					"name": "Delete Booking (Admin Only)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/bookings/{{booking_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"bookings",
								"{{booking_id}}"
							]
						},
						"description": "Delete a booking. Requires admin authentication."
					},
					"response": []
				}
			],
			"description": "Booking management endpoints for creating and managing hotel reservations."
		},
		{
			"name": "üí≥ Payment Management",
			"item": [
				{
					"name": "Create Payment (Stripe Checkout)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.sessionId) {",
									"        pm.environment.set('stripe_session_id', response.data.sessionId);",
									"        console.log('Stripe session created! Session ID saved to environment variables');",
									"        console.log('Checkout URL: ' + response.data.url);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"bookingId\": \"{{booking_id}}\",\n  \"amount\": 599.97\n}"
						},
						"url": {
							"raw": "{{base_url}}/payments",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"payments"
							]
						},
						"description": "Create a Stripe checkout session for payment. Returns checkout URL for completing payment."
					},
					"response": []
				},
				{
					"name": "Get All Payments",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/payments",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"payments"
							]
						},
						"description": "Get all payments. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Get Payment by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/payments/{{payment_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"payments",
								"{{payment_id}}"
							]
						},
						"description": "Get a specific payment by ID. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Update Payment",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"paymentStatus\": \"completed\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/payments/{{payment_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"payments",
								"{{payment_id}}"
							]
						},
						"description": "Update payment details. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Delete Payment",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/payments/{{payment_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"payments",
								"{{payment_id}}"
							]
						},
						"description": "Delete a payment record. Requires authentication."
					},
					"response": []
				},
				{
					"name": "Stripe Webhook",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Stripe-Signature",
								"value": "{{stripe_signature}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"id\": \"evt_test_webhook\",\n  \"object\": \"event\",\n  \"api_version\": \"2020-08-27\",\n  \"created\": 1326853478,\n  \"data\": {\n    \"object\": {\n      \"id\": \"cs_test_session_id\",\n      \"object\": \"checkout.session\",\n      \"client_reference_id\": \"{{booking_id}}\",\n      \"payment_intent\": \"pi_test_payment_intent\",\n      \"amount_total\": 59997\n    }\n  },\n  \"livemode\": false,\n  \"pending_webhooks\": 1,\n  \"request\": {\n    \"id\": \"req_test_request\",\n    \"idempotency_key\": null\n  },\n  \"type\": \"checkout.session.completed\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/payments/webhook",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"payments",
								"webhook"
							]
						},
						"description": "Stripe webhook endpoint for handling payment events. This is called automatically by Stripe when payment events occur."
					},
					"response": []
				}
			],
			"description": "Payment management endpoints for handling Stripe payments and webhooks."
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3000/api/v1",
			"type": "string"
		},
		{
			"key": "jwt_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_role",
			"value": "",
			"type": "string"
		},
		{
			"key": "room_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "booking_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "payment_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "stripe_session_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "stripe_signature",
			"value": "",
			"type": "string"
		}
	]
}
